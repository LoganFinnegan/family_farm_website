<h1 class="mb-4 text-center">Upcoming Events</h1>

<div class="row">
  <% @events.each do |event| %>
    <div class="col-md-4 mb-4">
      <div class="card h-100 shadow-sm">
        <% if event.flyer.attached? %>
          <%= image_tag event.flyer.variant(resize_to_fill: [400, 250]),
                        class: "card-img-top",
                        style: "width: 100%; height: 250px; object-fit: cover; object-position: center;" %>
        <% else %>
          <%= image_tag "https://via.placeholder.com/400x250?text=Event+Image",
                        class: "card-img-top",
                        style: "width: 100%; height: 250px; object-fit: cover; object-position: center;" %>
        <% end %>

        <div class="card-body d-flex flex-column">
          <h5 class="card-title">
            <%= link_to event.title, event_path(event), class: "stretched-link text-decoration-none" %>
          </h5>
          <p class="card-text">
            <strong>Date:</strong> <%= event.date.strftime("%B %d, %Y %I:%M %p") if event.date %><br>
            <strong>Location:</strong> <%= event.location %>
          </p>
          <p class="card-text"><%= truncate(event.description, length: 100) %></p>
        </div>
      </div>
    </div>
  <% end %>
</div>
