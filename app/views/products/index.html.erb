<h1 class="mb-4 text-center">Our Products</h1>

<div class="row">
  <% @products.each do |product| %>
    <div class="col-md-4 mb-4">
      <div class="card h-100 shadow-sm">
        <% if product.image.attached? %>
          <%= image_tag product.image.variant(resize_to_fill: [400, 250]),
                        class: "card-img-top",
                        style: "width: 100%; height: 250px; object-fit: cover; object-position: center;" %>
        <% else %>
          <%= image_tag "https://via.placeholder.com/400x250?text=Product+Image",
                        class: "card-img-top",
                        style: "width: 100%; height: 250px; object-fit: cover; object-position: center;" %>
        <% end %>

        <div class="card-body d-flex flex-column">
          <h5 class="card-title">
            <%= link_to product.name, product_path(product), class: "stretched-link text-decoration-none" %>
          </h5>
          <p class="card-text"><%= truncate(product.description, length: 100) %></p>
          <p><strong>Price:</strong> <%= number_to_currency(product.price) %></p>

          <% if product.in_stock? %>
            <span class="badge bg-success">In Stock</span>
          <% else %>
            <span class="badge bg-danger">Out of Stock</span>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
